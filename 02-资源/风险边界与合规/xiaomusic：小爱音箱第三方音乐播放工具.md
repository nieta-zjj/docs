---
title: "xiaomusic：小爱音箱第三方音乐播放工具"
对象: "GitHub 项目"
项目主页: "https://github.com/hanxi/xiaomusic"
Stars快照: "9240"
官方网站: "http://xdocs.hanxi.cc/"
主要语言: "Python"
开源协议: "MIT"
---

## 摘要

### 一句话总结
XiaoMusic 是一款基于 Python 开发的开源工具，通过接管小爱音箱播放控制并集成 `yt-dlp`，帮助用户突破平台限制，实现全网音乐自动下载、本地多格式音频播放及语音指令控制。

### 核心要点
* **项目基础**：基于 Python 开发，采用 MIT 协议开源，GitHub 获 9240 Stars。
* **语音与播控管理**：支持通过小爱同学语音指令进行基础播放控制、模式切换（单曲/列表循环/随机），以及指定歌单播放和收藏管理。
* **即搜即下即播**：深度集成 `yt-dlp`，当用户语音点播本地不存在的音频时，系统会自动下载该音频（默认 mp3 格式）并播放。
* **多格式与网络源支持**：支持扫描播放本地 mp3、flac、wav、ape、ogg、m4a 格式文件；支持配置 JSON 格式的网络歌单与电台，并提供 m3u 转换工具。
* **广泛的设备兼容**：已测试支持数十款小米/Redmi音箱；针对不支持无损格式的老旧型号（如 L05B、LX06），内置了“转换为MP3”和“型号兼容模式”。
* **部署与配置**：推荐使用 Docker 或 Docker Compose 部署（需分离配置文件与音乐目录），通过 Web 页面输入小米账号密码获取绑定的音箱列表。
* **生态扩展**：提供基于 FastAPI 的 API 接口，社区已衍生出多款第三方 Web 主题、微信小程序及手机 APP。

### 风险与不足
* **账号安全风险**：工具运行必须依赖小米账号密码。若配置公网访问，务必开启密码登录并设置复杂密码，严禁在公共 WiFi 环境下使用以防泄露。
* **隐私外泄风险**：强烈建议**不要**将绑定了家庭摄像头的小米账号用于此项目，若代码存在漏洞或账号泄露，可能导致监控录像外泄。
* **免责与未知缺陷**：项目仅供学习研究，可能存在导致设备损坏或账号封禁的未知缺陷，使用者需自行承担相关风险。

## 功能与定位
XiaoMusic 是一款专为小爱音箱设计的开源音乐播放工具。它通过接管小爱音箱的播放控制，并集成 `yt-dlp` 实现音乐下载，帮助用户突破原有的平台限制，在小爱音箱上实现自由、无限的音乐与音频播放。

## 典型使用场景
- 期望在小爱音箱上播放全网音乐、本地无损音频或网络电台的用户。
- 依托 NAS 或个人服务器（如 Docker 环境）搭建家庭专属音乐中心。
- 习惯通过语音指令直接点播特定歌曲、自定义歌单或有声读物的场景。

## 核心功能
- **语音指令控制**：支持通过小爱同学进行基础控制（上一首/下一首/停止）、播放模式切换（单曲循环/全部循环/随机播放）。
- **歌单与收藏管理**：支持通过语音指令播放指定目录名或列表名的歌单，并支持语音将当前播放歌曲加入或移出收藏。
- **网络歌单与电台**：支持配置 JSON 格式的网络歌单，兼容电台、歌曲及他人分享的链接，并提供 m3u 格式转换工具。
- **多格式音频支持**：支持扫描和播放本地的 mp3、flac、wav、ape、ogg、m4a 格式文件（通过工具下载的歌曲默认为 mp3 格式）。

## 特色与差异点
- **即搜即下即播**：结合 `yt-dlp`，当语音点播本地不存在的音频（例如对音箱说“播放歌曲小猪佩奇的故事”）时，系统会自动下载该音频并进行播放。
- **广泛的设备兼容性**：已测试支持数十款小米/Redmi音箱设备，涵盖基础款、Play版、Pro版、触屏版及 Xiaomi Sound 系列等。
- **老旧设备格式兼容**：针对部分不支持 flac 等无损格式的音箱型号（如 L05B、LX06 等），系统内置了“转换为MP3”和“型号兼容模式”选项以保障正常播放。
- **丰富的第三方生态**：项目提供 API 接口（基于 FastAPI），社区已衍生出多款第三方 Web 主题、微信小程序、手机 APP 及在线播放插件。

## 使用方式概览
- **部署方式**：推荐使用 Docker 或 Docker Compose 部署（官方提供常规镜像、国内镜像及测试版镜像），也可通过 `pip install -U xiaomusic` 进行原生安装。
- **配置管理**：提供 Web 设置页面进行参数配置。初次使用时，需在 Web 页面输入小米账号和密码并保存，以获取绑定的音箱设备列表。
- **目录规划**：部署时需将“配置文件目录”与“音乐存放目录”分开映射，以便于数据持久化和管理。

## 限制与注意事项
- **账号安全风险**：工具运行必须依赖小米账号密码。若配置了公网访问，**务必开启密码登录并设置复杂密码**，且严禁在公共 WiFi 环境下使用，以防账号泄露。
- **隐私隔离建议**：强烈建议**不要**将绑定了家庭摄像头的小米账号用于此项目。代码可能存在漏洞，一旦账号泄露，可能导致监控录像外泄。
- **免责声明**：项目仅供学习研究，可能存在未知缺陷（包括但不限于设备损坏或账号封禁），使用者需自行承担相关风险。

## 链接

- 仓库：https://github.com/hanxi/xiaomusic
- 官网：http://xdocs.hanxi.cc/

## 关联主题

- [[00-元语/risk]]
- [[00-元语/security]]
- [[00-元语/compliance]]
- [[00-元语/github]]
- [[00-元语/tool]]
